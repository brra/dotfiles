#!/bin/sh

if command -v docker >/dev/null 2>&1 ; then
  echo "Docker is already installed"
else
  curl -sSL https://get.docker.com | sh
  usermod -aG docker "$(whoami)"
fi

if command -v docker-compose >/dev/null 2>&1 ; then
  echo "Docker Compose is already installed"
else
  docker_compose_release="$(curl --silent "https://api.github.com/repos/docker/compose/releases/latest" |  grep '"tag_name":' | sed -E 's/.*"([^"]+)".*/\1/')"
  curl -L https://github.com/docker/compose/releases/download/"$docker_compose_release"/docker-compose-"$(uname -s)"-"$(uname -m)" -o /usr/local/bin/docker-compose
  chmod a+x /usr/local/bin/docker-compose
fi
